@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AnalysisEcharts</title>
    @RenderPage("~/Views/Share/bootstrap.cshtml")
    <script src="~/Resource/plugins/Echarts/echarts.js"></script>
    <script src="~/Resource/plugins/Echarts/echarts-gl.js"></script>
    <script src="~/Resource/plugins/Echarts/huaian.js"></script>
    <script src="~/Resource/plugins/Echarts/wonderland.js"></script>
</head>
<body>
    <div style="">
        <div class="container" style="width:100%;position:fixed;z-index:1000">
            <div class="row" style=" background-color: #fff">
                <div class="col-xs-12" style="padding:0px;">
                    <h2 style="text-align: center;">党员干部森林健康状况图</h2>
                </div>
            </div>
            <div class="row">
                @*<div class="col-xs-1">
                    @*<button type="button" class="layui-btn" onclick="quanshi()">全市情况</button>
                    <button type="button" class="layui-btn" data-toggle="modal" data-target="#AllData">数据明细</button>*@
                    @*<button type="button" class="layui-btn" data-toggle="modal" data-target="#ScoringInstructions">评分说明</button>
    </div>*@
                
                
            </div>

        </div>
        <div class="row">
            <div class="col-xs-6" style="margin-top:30px;">
                <div id="main" style="width: 100%;height:650px;float: left;display: inline-block;"></div>
                <div style="position:absolute;top:580px;width:100%;text-align:center">
                    @*<h3 style="text-align:center;position:relative">淮安市党员干部森林健康状况图</h3>*@
                </div>
            </div>
            <div class="col-xs-5 col-xs-offset-1" style="margin-top:30px;padding-top:70px">
                <div class="row">
                    <div class="col-xs-2">
                        <label>年度</label>
                    </div>
                    <div class="col-xs-6">
                        <select id="CountDate" class="form-control" name="CountDate" required="required"></select>
                    </div>
                    <div class="col-xs-1">
                        <button class="layui-btn" style="margin-top:2px" type="button" onclick="mySreach()">查询</button>
                    </div>
                </div>
                <div class="row" style="margin-top:10px">
                    <div class="panel panel-info">
                        <div class="panel-heading" style="font-size:20px">
                            <i class="fa fa-info-circle"></i> 建模规则
                        </div>
                        <div class="panel-body">
                            <p style="font-size: 16px; text-indent: 2em; line-height: 2.5; ">第一种形态：提醒谈话、函询扣1分，民主生活会情况扣2分。问责情况：通报批评、诫勉谈话、责令书面检查、公开道歉情况扣2分，停职检查扣3分，引咎辞职、责令辞职、免职、辞退或解聘扣5分。党纪处分：党内警告、严重警告扣3分，撤销党内职务、留党察看、开除党籍扣5分。政纪处分：行政警告、记过、记大过、降级扣3分，撤职、开除扣5分。严重违纪涉嫌违法被立案审查的扣10分。处理人为乡科级干部，扣除分加权2倍，县处级干部加权4倍；扣除分经各县区比较换算为百分制相对总分后作为最终综合评分。</p>
                        </div>
                    </div>
                </div>
                
            </div>
        
        </div>
    </div>

</body>
</html>
<script type="text/javascript">
    var myDate = new Date();
    var CountDate = myDate.getFullYear() - 5;//起始年份 
    var endYear = myDate.getFullYear() + 5;//结束年份 
    var obj = document.getElementById('CountDate')
    for (var i = CountDate; i <= endYear; i++) {
        obj.options.add(new Option(i, i));
    }
    obj.options[obj.options.length - 6].selected = 1;
   
    mySreach();
    function mySreach() {
        GetMapData();
        
    }
    function GetMapData() {
        console.log($("#CountDate").val());
        $.ajax({
            url: "/Analysis/GetFourFormsMap",
            type: "post",
            dataType: "json",
            data: { CountDate: $("#CountDate").val() },
            success: function (data) {
                //console.log(data);
                var myData = "[" + data.substring(0, data.length - 1) + "]";
                console.log(myData);
                myData = JSON.parse(myData);
                map(myData);
            },
            error: function () {
                console.log("失败了");
            }
        })
    }
    function map(myData) {
        var chart = echarts.init(document.getElementById('main'), 'wonderland');
        $.getJSON('/Resource/plugins/Echarts/json/jiangsu.json', function (data) {
            echarts.registerMap('huaian', data);

            chart.setOption({
                series: [{
                    type: 'map',
                    map: 'huaian',
                    data: myData,
                    selectedMode: 'single',

                    label: {
                        normal: {
                            show: true
                        },
                        emphasis: {
                            show: true,
                        }
                    },
                    itemStyle: {
                        shadowColor: 'rgba(0,0,0,0.8)',
                        shadowOffsetX: 10,
                        shadowOffsetY: 10,
                    }
                }],
                tooltip: {
                    formatter: function (params) {
                        return "监督信息综合评分:" + params.value;
                    }
                },
                visualMap: {
                    min: 80,
                    max: 95,
                    left: 'left',
                    top: '120',
                    text: ['高', '低'], // 文本，默认为数值文本
                    calculable: true,
                    color: [
                        "#70c859",
                         "#88c859",
                        "#aac859",
                        "#c8af59",
                        "#c50000",
                    ]
                },
            });
        });
    }
    

    var JILuurl = '/Json/jilvshenchabiaoge.json';
    $('#Sroce_table').bootstrapTable({
        method: 'get',
        //url: JILuurl,
        title: "2017年1月至6月全市纪律审查情况一览表",
        striped: true,
        clickToSelect: true,
        pageSize: 10,
        //sidePagination: 'server',
        pageList: [10, 20, 50, 100, 200, 500],
        queryParamsType: 'limit',
        columns: [
        ]
    })
</script>