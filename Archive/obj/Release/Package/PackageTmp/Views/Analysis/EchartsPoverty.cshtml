@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AnalysisEcharts</title>
    @RenderPage("~/Views/Share/bootstrap.cshtml")
    <script src="~/Resource/plugins/Echarts/echarts.js"></script>
    <script src="~/Resource/plugins/Echarts/echarts-gl.js"></script>
    <script src="~/Resource/plugins/Echarts/huaian.js"></script>
    <script src="~/Resource/plugins/Echarts/wonderland.js"></script>
</head>
<body>
    <div style="">
        <div class="container" style="width:100%;position:fixed;z-index:1000">
            <div class="row" style=" background-color: #fff">
                <div class="col-xs-12">
                    <h2 style="text-align: center;">重点行业领域立案审查专题分析</h2>
                </div>
            </div>

        </div>
        <div class="row" style="">
            <div class="col-xs-1" style="margin-top: 70px;">
                <label>选择年份</label>
            </div>
            <div class="col-xs-2" style="margin-top: 70px;">
                <input placeholder="年份" value="" class="form-control layer-date"  id="start2">
            </div>
            <div class="col-xs-1" style="margin-top: 70px;">
                <label>行业领域</label>
            </div>
            <div class="col-xs-2" style="margin-top: 70px;">
                <select id="BriefCase" class="form-control selectpicker">
                    <option value="贫">扶贫</option>
                    <option value="环保">环保</option>
                    <option value="教育">教育</option>
                    <option value="卫生">卫生</option>
                    <option value="交通">交通</option>
                    <option value="水利">水利</option>
                    <option value="国土">国土</option>
                    <option value="科技">科技</option>
                    <option value="民政">民政</option>
                    <option value="安监">安监</option>
                    <option value="农机">农机</option>
                    <option value="招投标">招投标</option>
                    <option value="拆迁">征地拆迁</option>
                    <option value="工程">工程建设</option>
                </select>
            </div>
            <div class="col-xs-1" style="margin-top: 70px;">
                <button class="layui-btn" style="margin-top:2px" type="button" onclick="mySreach()">查询</button>
            </div>
        </div>
        <div class="row" style="">
            <div class="col-xs-6">
                <div id="DutyLevel" style="margin-top: 10px;width:100%; height: 500px; float: left; display: inline-block; margin-bottom: 30px;"></div>
            </div>
            <div class="col-xs-6">
                <div id="Source" style="margin-top: 10px;width:100%; height: 500px; float: left; display: inline-block; margin-bottom: 30px;"></div>
            </div>
        </div>
        <div class="row" style="">
            <div class="col-xs-6">
                <div id="Discipline" style="margin-top: 10px;width: 100%; height: 500px; float: left; display: inline-block; margin-bottom: 30px;"></div>
            </div>
            <div class="col-xs-6">
                <div id="Law" style="margin-top: 10px;width:100%; height: 500px; float: left; display: inline-block; margin-bottom: 30px;"></div>
            </div>
        </div>
        <div class="row" style="">
            <div class="col-xs-6">
                <div id="Money" style="margin-top: 10px;width: 100%; height: 500px; float: left; display: inline-block; margin-bottom: 30px;"></div>
            </div>
            <div class="col-xs-6">
                <div id="Punishment" style="margin-top: 10px;width:100%; height: 500px; float: left; display: inline-block; margin-bottom: 30px;"></div>
            </div>
        </div>
        <div style="height:20px"></div>
    </div>
</body>
</html>
<script>
    function Appendzero(obj) {
        if (obj < 10) return "0" + obj; else return obj;
    }
    var myDate = new Date();
    var year = myDate.getFullYear();
    var now = Appendzero(year);
    var start2 = laydate.render({
        elem: '#start2',
        type: 'year',
        //format: 'YYYY-MM',
        min: '1900-06-16 23:59:59', //设定最小日期为当前日期
        max: '2099-06-16 23:59:59', //最大日期
        value: now,
    });
    mySreach();
    function mySreach() {
        GetPovertyByLevel();
        GetPovertyBySource();
        GetPovertyByIllegalBehavior();
        GetPovertyByLawBehavior();
        GetPovertyByAccount();
        GetPovertyByPartyPunish();
    }
    function GetPovertyByLevel() {
        $.ajax({
            url: "/Analysis/GetPovertyByLevel",
            type: "post",
            dataType: "json",
            data: { CountDate1: $("#start2").val(), BriefCase: $("#BriefCase").val() },
            success: succFunction,
            error: function () {
                console.log("失败了");
            }
        })
    }
    function succFunction(data) {
        //console.log(data);
        var myData = "[" + data.substring(0, data.length - 1) + "]";
        // console.log(myData);
        myData = JSON.parse(myData);
        //console.log(myData);
        DutyLevelChart(myData);
    }
    function DutyLevelChart(myData) {
        var DutyLevelChart = echarts.init(document.getElementById('DutyLevel'), 'wonderland');
        optionDutyLevel = {
            title: {
                x: 'center',
                text: '按职级统计',
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                },

            },
            legend: {
                bottom: 0,
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '8%',
                containLabel: true
            },
            xAxis: [
                {
                    type: 'category',
                    axisTick: { show: false },
                    data:  ["县处级", "乡科级", "一般干部", "其他人员"]
                }
            ],
            yAxis: [
                {
                    type: 'value'
                }
            ],
            series: [
                {
                    barWidth: 30,
                    name: '案件数',
                    type: 'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: myData
                }
            ]
        };
        DutyLevelChart.setOption(optionDutyLevel);
    }
   
    //案件来源
    function GetPovertyBySource() {
        $.ajax({
            url: "/Analysis/GetPovertyBySource",
            type: "post",
            dataType: "json",
            data: { CountDate1: $("#start2").val(), BriefCase: $("#BriefCase").val() },
            success: succFunction2,
            error: function () {
                console.log("失败了");
            }
        })
    }
    function succFunction2(data) {
        //console.log(data);
        var myData = "[" + data.substring(0, data.length - 1) + "]";
        // console.log(myData);
        myData = JSON.parse(myData);
        //console.log(myData);
        SourceChart(myData);
    }
    function SourceChart(myData) {
        var SourceChart = echarts.init(document.getElementById('Source'), 'wonderland');
        optionSource = {
            title: {
                x: 'center',
                text: '按案件来源统计',
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                },

            },
            legend: {
                bottom: 0,
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '8%',
                containLabel: true,
                y2: 140
            },
            xAxis: [
                {
                    type: 'category',
                    axisTick: { show: false },
                    data: ['监督检查中发现', '上级交办', '纪律审查中发现', '审计中发现', '信访举报', '公检法等机关移送', '其他'],
                    axisLabel: {
                        interval: 0,//横轴信息全部显示  
                        rotate: -30,//-30度角倾斜显示  
                    }

                }
            ],
            yAxis: [
                {
                    type: 'value'
                }
            ],
            series: [
                {
                    barWidth: 30,
                    name: '案件数',
                    type: 'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: myData
                }
            ]
        };
        SourceChart.setOption(optionSource);
    }
    //按违纪行为统计
    function GetPovertyByIllegalBehavior() {
        $.ajax({
            url: "/Analysis/GetPovertyByIllegalBehavior",
            type: "post",
            dataType: "json",
            data: { CountDate1: $("#start2").val(), BriefCase: $("#BriefCase").val() },
            success: succFunction3,
            error: function () {
                console.log("失败了");
            }
        })
    }
    function succFunction3(data) {
        //console.log(data);
        var myData = "[" + data.substring(0, data.length - 1) + "]";
        // console.log(myData);
        myData = JSON.parse(myData);
        //console.log(myData);
        DisciplineChart(myData);
    }
    function DisciplineChart(myData) {
        var DisciplineChart = echarts.init(document.getElementById('Discipline'), 'wonderland');
        optionDiscipline = {
            title: {
                text: '按违纪行为统计',
                subtext: '',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            toolbox: {
                right: 10,
                top: 30,
                feature: {
                    dataView: {
                        show: true,
                        readOnly: true
                    },
                    restore: {
                        show: true
                    },
                    saveAsImage: {
                        show: true
                    }
                }
            },
            legend: {
                x: 'center',
                y: 'bottom',
                data: ['违反工作纪律', '违反群众纪律', '违反廉洁纪律', '违反政治纪律'],
            },
            series: [
                {
                    name: '',
                    type: 'pie',
                    radius: ['0%', '60%'],
                    center: ['50%', '50%'],
                    data:myData,
                    label: {
                        normal: {
                            textStyle: {
                                fontWeight: 'normal',
                                fontSize: 16
                            }
                        }
                    },
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        DisciplineChart.setOption(optionDiscipline);
    }
    //按涉法行为统计
    function GetPovertyByLawBehavior() {
        $.ajax({
            url: "/Analysis/GetPovertyByLawBehavior",
            type: "post",
            dataType: "json",
            data: { CountDate1: $("#start2").val(), BriefCase: $("#BriefCase").val() },
            success: succFunction4,
            error: function () {
                console.log("失败了");
            }
        })
    }
    function succFunction4(data) {
        //console.log(data);
        var myData = "[" + data.substring(0, data.length - 1) + "]";
        // console.log(myData);
        myData = JSON.parse(myData);
        //console.log(myData);
        LawChart(myData);
    }
    function LawChart(myData) {
        var LawChart = echarts.init(document.getElementById('Law'), 'wonderland');
        optionLaw = {
            title: {
                x: 'center',
                text: '按涉法行为统计',
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                },

            },
            legend: {
                bottom: 0,
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '8%',
                containLabel: true
            },
            xAxis: [
                {
                    type: 'category',
                    axisTick: { show: false },
                    data: ['贪污贿赂', '失职渎职', '破坏社会主义经济秩序']

                }
            ],
            yAxis: [
                {
                    type: 'value'
                }
            ],
            series: [
                {
                    barWidth: 30,
                    name: '案件数',
                    type: 'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: myData
                }
            ]
        };
        LawChart.setOption(optionLaw);
    }
    //按涉案金额统计
    function GetPovertyByAccount() {
        $.ajax({
            url: "/Analysis/GetPovertyByAccount",
            type: "post",
            dataType: "json",
            data: { CountDate1: $("#start2").val(), BriefCase: $("#BriefCase").val() },
            success: succFunction5,
            error: function () {
                console.log("失败了");
            }
        })
    }
    function succFunction5(data) {
        //console.log(data);
        var myData = "[" + data.substring(0, data.length - 1) + "]";
        // console.log(myData);
        myData = JSON.parse(myData);
        //console.log(myData);
        MoneyChart(myData);
    }
    function MoneyChart(myData) {
        var MoneyChart = echarts.init(document.getElementById('Money'), 'wonderland');
        optionMoney = {
            title: {
                text: '按涉案金额统计',
                subtext: '',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            toolbox: {
                right: 10,
                top: 30,
                feature: {
                    dataView: {
                        show: true,
                        readOnly: true
                    },
                    restore: {
                        show: true
                    },
                    saveAsImage: {
                        show: true
                    }
                }
            },
            legend: {
                x: 'center',
                y: 'bottom',
                data: ["1万以下", "1-10万", "10-100万", "100万以上"],
            },
            series: [
                {
                    name: '',
                    type: 'pie',
                    radius: ['0%', '60%'],
                    center: ['50%', '50%'],
                    data: myData,
                    label: {
                        normal: {
                            textStyle: {
                                fontWeight: 'normal',
                                fontSize: 16
                            }
                        }
                    },
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        MoneyChart.setOption(optionMoney);
    }
    //按党政纪处分统计
    function GetPovertyByPartyPunish() {
        $.ajax({
            url: "/Analysis/GetPovertyByPartyPunish",
            type: "post",
            dataType: "json",
            data: { CountDate1: $("#start2").val(), BriefCase: $("#BriefCase").val() },
            success: succFunction6,
            error: function () {
                console.log("失败了");
            }
        })
    }
    function succFunction6(data) {
        //console.log(data);
        var myData = "[" + data.substring(0, data.length - 1) + "]";
        // console.log(myData);
        myData = JSON.parse(myData);
        //console.log(myData);
        PunishmentChart(myData);
    }
    function PunishmentChart(myData) {
        var PunishmentChart = echarts.init(document.getElementById('Punishment'), 'wonderland');
        optionPunishment = {
            title: {
                text: '按党政纪处分统计',
                subtext: '',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            toolbox: {
                right: 10,
                top: 30,
                feature: {
                    dataView: {
                        show: true,
                        readOnly: true
                    },
                    restore: {
                        show: true
                    },
                    saveAsImage: {
                        show: true
                    }
                }
            },
            legend: {
                x: 'center',
                y: 'bottom',
                data: ['警告', '严重警告', '留党察看', '开除党籍', '刑事处罚'],
            },
            series: [
                {
                    name: '',
                    type: 'pie',
                    radius: ['0%', '60%'],
                    center: ['50%', '50%'],
                    data: myData,
                    label: {
                        normal: {
                            textStyle: {
                                fontWeight: 'normal',
                                fontSize: 16
                            }
                        }
                    },
                    itemStyle: {
                        emphasis: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        PunishmentChart.setOption(optionPunishment);
    }
</script>