@using Model;
@{
    Layout = null;
    AdjustInfo item = ViewBag.adjustinfo;
    Dept dept = ViewBag.dept;
}

<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    @RenderPage("~/Views/Share/Include.cshtml")
    <script src="~/Resource/edit.js"></script>
    @* <link href="~/Resource/form.css" rel="stylesheet" />*@
    <script src="~/Web/guid.js"></script>
    @RenderPage("~/Views/Share/bootstrap.cshtml")
</head>
<body>
    <div class="row" style="margin-top:20px;">
        <div class="col-xs-1">
            <input name="b_print" type="button" class="ipt btn btn-primary " onclick="printdiv('div_print');" value="打印">
        </div>
    </div>
    <div id="div_print">
        <form id="Adjust" name="Adjust" method="post" class="form-inline">
            <div class="row">
                <div class="col-md-12">
                    <h3 class="Gradient">组织调整情况登记表</h3>
                </div>
                <input style="display:none" type="text" value="@item.ID" id="ID" name="ID" />
                <input style="display:none" type="text" value="@item.HandleStaff" id="HandleStaff" name="HandleStaff" />
                <input style="display:none" type="text" value="@item.HandleDept" id="HandleDept" name="HandleDept" />
            </div>
            <div class="row">
                <div class="col-md-2 margin-top-10">
                    <label class="margin-5" for="DeptName">填报单位：</label>
                </div>
                <div class="col-md-2 margin-top-10">
                    <input readonly class="form-control" type="text" id="DeptName" name="DeptName" value="@dept.DeptName" />
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="PersonName">姓名：</label>
                </div>
                <div class="col-xs-2 margin-top-10">
                    <input readonly class="form-control" type="text" id="PersonName" name="PersonName" value="@item.PersonName" data-options="required:true" />
                </div>
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="IDCard">身份证号：</label>
                </div>
                <div class="col-xs-2 margin-top-10">
                    <input readonly class="form-control" type="text" value="@item.IDCard" id="IDCard" name="IDCard" />
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="PersonUnit">所在单位：</label>
                </div>
                <div class="col-xs-6 margin-top-10">
                    <input readonly class="form-control" type="text" value="@item.PersonUnit" id="PersonUnit" name="PersonUnit" />
                </div>
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="PersonDuty">职级：</label>
                </div>
                <div class="col-xs-2 margin-top-10">
                    <input readonly class="form-control" type="text" value="@item.PersonDuty" id="PersonDuty" name="PersonDuty" />
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="FilingCode">处理文号：</label>
                </div>
                <div class="col-xs-2 margin-top-10">
                    <input readonly class="form-control" type="text" value="@item.FilingCode" id="FilingCode" name="FilingCode" />
                </div>
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="AdjustTime">调整时间：</label>
                </div>
                <div class="col-xs-2 margin-top-10">
                    <input readonly class="form-control" name="AdjustTime" value="@item.AdjustTime">
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="PersonName">处理机关：</label>
                </div>
                <div class="col-xs-2 margin-top-10">
                    <input readonly id="FilingUnit" name="FilingUnit" type="text" class="form-control" value="@item.FilingUnit">
                </div>
            </div>
            <div class="row">
                <div class="col-md-2 margin-top-10">
                    <label class="margin-5" for="AdjustType">调整方式：</label>
                </div>
                <div class="col-md-10 margin-top-10">
                    <textarea readonly rows="5" id="AdjustType" name="AdjustType" class="form-control">@item.AdjustType</textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2 margin-top-10">
                    <label class="margin-5" for="AdjustReason">调整事由：</label>
                </div>
                <div class="col-md-10 margin-top-10">
                    <textarea readonly rows="5" id="AdjustReason" name="AdjustReason" class="form-control">@item.AdjustReason</textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-2 margin-top-10">
                    <label class="margin-5" for="WagesChange">工资执行情况：</label>
                </div>
                <div class="col-xs-10 margin-top-10">
                    <textarea readonly rows="5" id="WagesChange" required="required" name="WagesChange" class="form-control">@item.WagesChange</textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2 margin-top-10">
                    <label class="margin-5" for="AdjustReason">备注：</label>
                </div>
                <div class="col-md-10 margin-top-10">
                    <textarea readonly rows="5" id="Remark" name="Remark" class="form-control">@item.Remark</textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 margin-top-10" style="margin-top:30px;">
                    <label style="float:left">组织调整相关文书</label>
                </div>
                <div class="col-md-12 margin-top-10">
                    <div style="width:100%;margin-top:20px;">
                        <table id="Adjust_table" class="table table-striped table-no-bordered table-hover"></table>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 margin-top-10" style="margin-top:30px;">
                    <label style="float:left">工资变动相关文书</label>
                </div>
                <div class="col-xs-12 margin-top-10">
                    <div style="width:100%;">
                        <table id="AdjustGongZi_table" class="table table-striped table-no-bordered table-hover"></table>
                    </div>
                </div>
            </div>
            <div class="col-md-12 margin-top-10">
                <div align="center" style="margin-top:20px;">
        
                </div>
            </div>
        </form>
    </div>
</body>
</html>
<script>
    //打印
    function printdiv(printpage) {
        var headstr = "<html><head><title></title></head><body>";
        var footstr = "</body></html>";
        var newstr = document.all.item(printpage).innerHTML;
        var oldstr = document.body.innerHTML;
        //console.log(AddwaterMark);
        document.body.innerHTML = headstr + newstr + footstr;
        document.title = '综合信息查询';
        //console.log(document.body.innerHTML);
        window.print();
        document.body.innerHTML = oldstr;
        return false;
    }
    //打印end
    //
    $('#Adjust_table').bootstrapTable({
        method: 'post',
        url: '/File/GetList?ID=@item.ID&Type=Adjust',
        striped: true,
        clickToSelect: true,
        pageSize: 10,
        sidePagination: 'server',
        pageList: [10, 20, 50, 100, 200, 500],
        queryParamsType: 'limit',
        sortName: 'Name',
        sortOrder: 'asc',
        columns: [
            { field: 'FileName', title: '文件名', width: 200, editable: false, },
            { field: 'opt', title: '操作', width: 100, editable: false, formatter: operateFormatter },
        ],
    });
    function operateFormatter(value, row, index) {
        return [
            '<a  href="/File/Download?ID=' + row.ID + '" id="btn_detail" type="button" class=""><span class="glyphicon glyphicon-floppy-save"></span>下载</a>',
        ].join('');
    }
    $('#AdjustGongZi_table').bootstrapTable({
        method: 'post',
        url: '/File/GetList?ID=@item.ID&Type=AdjustGongZi',
        striped: true,
        clickToSelect: true,
        pageSize: 10,
        sidePagination: 'server',
        pageList: [10, 20, 50, 100, 200, 500],
        queryParamsType: 'limit',
        sortName: 'ID',
        sortOrder: 'asc',
        columns: [
            { field: 'FileName', title: '文件名', width: 200, editable: false, },
            { field: 'opt', title: '操作', width: 100, editable: false, formatter: operateFormatterAdjustGongZi },
        ],
    });
    function operateFormatterAdjustGongZi(value, row, index) {
        return [
        '<a  href="/File/Download?ID=' + row.ID + '" id="btn_detail" type="button" class="layui-btn layui-btn-danger layui-btn-sm" style="margin-right:20px;"><span class="glyphicon glyphicon-floppy-save"></span>下载</a>',
        ].join('');
    }

</script>