@using Model;
@{
    Layout = null;

}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link href="~/Resource/plugins/metro/transition/metro-all.css" rel="stylesheet" />
    <link href="~/Resource/plugins/metro/transition/start.css" rel="stylesheet" />
    <script src="~/Resource/plugins/metro/transition/jquery-3.3.1.min.js"></script>
    <script src="~/Resource/plugins/metro/PAGETRANSITIONS/js/modernizr.custom.js"></script>
    <link href="~/Resource/plugins/metro/PAGETRANSITIONS/css/component.css" rel="stylesheet" />
    <link href="~/Resource/plugins/metro/PAGETRANSITIONS/css/animations.css" rel="stylesheet" />
    <title>监督执纪问责信息综合平台</title>
    <style>
        .mybranding-bar {
            text-decoration: none;
            text-align: center;
            display: block;
            font-size: 24px;
            font-family: "方正仿宋_GBK";
            font-weight: 600;
        }

        .tile-small span {
            font-size: 24px !important;
        }

        .tiles-group {
            margin-top: 90px !important;
        }

            .tiles-group::before {
                top: -46px;
                font-size: 24px;
                color: #ffffff;
                font-family: "方正小标宋_GBK";
                text-align: center;
                width: 150px;
            }

        a {
            text-decoration: none;
        }

            a:hover {
                text-decoration: none !important;
                color: #ffffff !important;
            }

        .tiles-group {
            margin-left: 20px !important;
        }

        .start-screen {
            padding: 80px 0px 0 0 !important;
        }

        .pt-page {
            background: #1f5d9a !important;
        }

        .pt-triggers {
            position: fixed;
            top: 160px;
            left: 50%;
            width: 350px;
        }

            .pt-triggers button {
                display: inline-block !important;
                background: #009688;
                color: #ffffff;
                font-size: 20px !important;
                width: 170px !important;
                border-radius: 3px;
                font-family: "方正小标宋_GBK" !IMPORTANT;
            }
    </style>
</head>
<body class=" fg-white" style="background-image: url(/Resource/login/c_bj.jpg);background-size:cover;background-repeat:no-repeat">
    <img style="margin-left: 25%; display: block; margin-top: 20px; margin-bottom: 3%;" src="~/Resource/login/logoJSYX.png" />
    <h1 class="start-screen-title" style="color: #000000; font-size: 60px; font-family: '方正小标宋_GBK'; text-align: center; display: block; position: relative; margin-bottom: 1%; left: 0px !important; ">监督执纪问责信息综合平台</h1>
   
    <div style="position: absolute; z-index: 9999; top: 8%; right:8%">
        <img style=" margin-left: 40px; width: 50px;  margin-top: 20px; " src="~/Resource/login/touxiang.png" />
        <p id="dengluzhe" style="margin-left: 20px; font-size: 24px; font-family: '方正小标宋_GBK';   color: #165490; text-shadow: 0px 1px 0px #c0c0c0, 0px 2px 0px #b0b0b0, 0px 3px 0px #a0a0a0, 0px 2px 0px #909090, 0px 3px 4px rgba(0, 0, 0, .9); letter-spacing: 5px; transition:0.3s all">@Session["RealName"]</p>
        <p id="dengluzhe" style="margin-left: 20px; font-size: 24px; font-family: '方正小标宋_GBK';   color: #165490; text-shadow: 0px 1px 0px #c0c0c0, 0px 2px 0px #b0b0b0, 0px 3px 0px #a0a0a0, 0px 2px 0px #909090, 0px 3px 4px rgba(0, 0, 0, .9); letter-spacing: 5px; transition:0.3s all">@Session["DeptName"]</p>

            <select class="form-control" id="unitlist" style="padding:0px;margin-left:20px;width:200px;border:none;background:none;font-size: 24px; font-family: '方正小标宋_GBK'; color: #165490; text-shadow: 0px 1px 0px #c0c0c0, 0px 2px 0px #b0b0b0, 0px 3px 0px #a0a0a0, 0px 2px 0px #909090, 0px 3px 4px rgba(0, 0, 0, .9); letter-spacing: 5px; transition:0.3s all"></select>

        
       
        <div style="clear:both"></div>
        
    
    </div>
    <div class="container-fluid start-screen no-overflow" style="height:640px;" id="asfasd">

       
        <div id="pt-main" class="pt-perspective" style="margin:auto">
            <div class="pt-page pt-page-1">
                <div class="tiles-area" style="margin:auto;height:560px" id="adsfa">

                </div>
            </div>
            <div class="pt-page pt-page-2">
                <div class="tiles-area" style="margin:auto;height:560px" id="adsfa2">

                </div>
            </div>
        </div>
    </div>
    <div class="pt-triggers">
        <div id="dl-menu" class="dl-menuwrapper">
            @*<button id="zhu" disabled class="pt-touch-button qiehuan">主业务系统</button>
            <button id="fu" class="pt-touch-button qiehuan">辅助业务系统</button>*@
            <button id="iterateEffects" style="display:none !important" class="pt-touch-button"></button>
        </div>
    </div>
    <script src="~/Resource/plugins/metro/transition/jquerySession.js"></script>
    <script>

    </script>
    <script src="~/Resource/plugins/metro/PAGETRANSITIONS/js/jquery.dlmenu.js"></script>
    <script src="~/Resource/plugins/metro/PAGETRANSITIONS/js/pagetransitions.js"></script>
    <script src="~/Resource/plugins/metro/transition/metro.js"></script>
    <script>

        $.ajax({
            url: "/Home/GetUnitListByDeptID",
            data: {
                "DeptID": "@Session["HandleDept"]"
            },
            type: "post",
            success: function (data) {
                console.log(data);
                for (var i = 0; i < data.length;i++) {
                    var obj = data[i];
                    console.log(obj);
                    var str = "<option value='" + obj.ID + "' onclick='SetUnitID('" + obj.ID+"')'>"+obj.UnitName+"</option>"
                        $("#unitlist").append(str);

                }

                $("#unitlist").val("@Session["UnitID"]");

            }
        });


        $("#unitlist").change(function () {
            SetUnitID($(this).val());
        });
        function SetUnitID(value) {
            console.log(value);
              $.ajax({
                  url: "/Home/SetSession",
            data: {
                "UnitID": value
            },
            type: "post",
            success: function (data) {
                $("#unitname").text($("#unitlist option:selected").text());
                console.log(data);


            }
        });
        }
    $("#zhu").click(function () {
        $("#zhu").attr("disabled", "disabled");
        $("#fu").removeAttr("disabled");
        $("#iterateEffects").click();
    });
    $("#fu").click(function () {
        $("#fu").attr("disabled", "disabled");
        $("#zhu").removeAttr("disabled");
        $("#iterateEffects").click();
    })
    var color = ["#06AED5", "#EF9F5B", "#55C090", "#FF6B6B"];
        @*$.ajax({
            type: 'GET',
            url: '/Menu/GetMenuData?title=@Html.Raw(ViewBag.FirstMenu)&r=' + Math.random(),
            async: false,//同步
            dataType: 'json',
            success: function (json) {
                var _menus1 = "";
                var _menus2 = "";
                //console.log(json.default);
                //console.log(json.default.length);
                //console.log(json.default[0].menus.length);*@
        var _menus = "@Session["Menus"]";
        var reg = new RegExp("&quot;", "g");
        var Menus = _menus.replace(reg, "\"");
        //console.log(Menus);
        var json = JSON.parse(Menus);
        console.log(json);
        var _menus1 = "";
                for (var i = 0; i < json.menus.length ; i++) {

                        if (json.menus[i].menus.length <= 3) {
                            _menus1 += '<div class="tiles-grid tiles-group size-1 fg-white" data-group-title="' + json.menus[i].menuname + '">';
                        } else if (3 < json.menus[i].menus.length) {
                            _menus1 += '<div class="tiles-grid tiles-group size-3 fg-white" data-group-title="' + json.menus[i].menuname + '">';
                        }
                        for (var j = 0; j < json.menus[i].menus.length; j++) {
                            //console.log(json.menus[i].menus[j].url);
                            if (json.menus[i].menus.length <= 8) {
                                _menus1 += '<a href="javascript:tiaozhuan(\'' + json.menus[i].menus[j].url + '\',\'' + json.menus[i].menus[j].menuid + '\',\'' + json.menus[i].menus[j].menuname + '\')" data-role="tile" class=" fg-white" style="background-color:' + color[i % 4] + ';border-radius:10px">';
                                _menus1 += '<span class="mybranding-bar" style="width: 100px;display: block;margin: 40px auto;">' + json.menus[i].menus[j].menuname + '</span>';
                                _menus1 += '</a>';
                            } else {
                                _menus1 += '<a href="javascript:tiaozhuan(\'' + json.menus[i].menus[j].url + '\',\'' + json.menus[i].menus[j].menuid + '\',\'' + json.menus[i].menus[j].menuname + '\')" data-role="tile" data-size="small" class=" fg-white"  style="background-color:' + color[i % 4] + ';border-radius:5px">';
                                _menus1 += '<span class="mybranding-bar">' + json.menus[i].menus[j].menuname + '</span>';
                                _menus1 += '</a>';
                            }
                        }
                        _menus1 += '</div>';

                }
                 if (_menus1 != "") $('#adsfa').append(_menus1);

        //    },
        //    error: function (xhr, status, error) {
        //        layer.alert("操作失败"); //xhr.responseText
        //    }
        //});
        function tiaozhuan(url, id, name) {
            $.session.set('myurl', url);
            $.session.set('mymenusid', id);
            $.session.set('mymenusname', name);
            window.location.href = "/Home/Index";
        }
    </script>
    <script src="~/Resource/plugins/metro/transition/start.js"></script>

</body>
</html>