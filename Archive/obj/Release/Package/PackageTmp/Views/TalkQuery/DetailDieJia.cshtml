@using Model;
@{
    Layout = null;
    TalkQuery item = ViewBag.TalkQuery;
}

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    @RenderPage("~/Views/Share/bootstrap.cshtml")
    <script src="~/Resource/plugins/diejia/js/zturn.js"></script>
    <link href="~/Resource/plugins/diejia/css/public.css" rel="stylesheet" />
    <link href="~/Resource/plugins/diejia/css/style.css" rel="stylesheet" />
    <style>
        .yeshu {
            position: absolute;
            bottom: 23px;
        }

        ul .box-shadow {
            box-shadow: 5px 5px 10px rgba(0, 0, 0,0.3);
        }
    </style>
</head>
<body style="background-color:rgba(0,0,0,0);">
    <div class="container">
        <div class="pictureSlider poster-main">
            <div class="poster-btn poster-prev-btn"></div>
            <form id="ffAdd" method="post" novalidate="novalidate">
                <ul id="zturn" class="poster-list">
                    <li class="poster-item  zturn-item box-shadow" id="dayin1">
                        <div class="row">
                            <div class="col-xs-12">
                                <h3 class="Gradient">谈话函询</h3>
                            </div>

                            <input readonly style="display:none" type="text" value="@item.ID" id="ID" name="ID" />
                            <input readonly style="display:none" type="text" value="@item.HandleStaff" id="HandleStaff" name="HandleStaff" />
                            <input readonly style="display:none" type="text" value="@item.HandleDept" id="HandleDept" name="HandleDept" />
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonName">收到日期：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control  " type="text" id="ReceiveDate" name="ReceiveDate" value="@item.ReceiveDate" />
                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="IDCard">是否为重复件：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="IsRepeat" name="IsRepeat" value="@item.IsRepeat" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonGender">线索来源：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="ClueSource" name="ClueSource" value="@item.ClueSource" />
                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonArea">信访编号：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="ClueCode" name="ClueCode" value="@item.ClueCode" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonName">被反映人姓名：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="PersonName" name="PersonName" value="@item.PersonName" />

                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="IDCard">身份证号码：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="IDCard" name="IDCard" value="@item.IDCard" />

                            </div>
                        </div>
                        <div style="clear:both"></div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonGender">性别：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="PersonGender" name="PersonGender" value="@item.PersonGender" />
                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonPolitic">政治面貌：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="PersonPolitic" name="PersonPolitic" value="@item.PersonPolitic" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonPhone">联系方式：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="PersonPhone" name="PersonPhone" value="@item.PersonPhone" />
                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonDuty">职务：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="PersonDuty" name="PersonDuty" value="@item.PersonDuty" />

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonLevel">级别</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="PersonLevel" name="PersonLevel" value="@item.PersonLevel" />
                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="PersonUnit">单位名称：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="PersonUnit" name="PersonUnit" value="@item.PersonUnit" />
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="MainProblem">线索反映主要问题：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="MainProblem" name="MainProblem" value="@item.MainProblem" />
                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="ApprovalDate">签批日期：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control  " type="text" id="ApprovalDate" name="ApprovalDate" value="@item.ApprovalDate" />
                            </div>
                        </div>

                        <div style="clear:both"></div>

                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="HandleLevel">处置方式：</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control  " type="text" id="HandleType" name="HandleType" value="@item.HandleType" />
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="SendLetterDate">送达函询通知书日期</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="SendLetterDate" name="SendLetterDate" value="@item.SendLetterDate" />

                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="IsCC">是否抄送</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="IsCC" name="IsCC" value="@item.IsCC" />

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="ReceiveLetterDate">收到回函日期</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="ReceiveLetterDate" name="ReceiveLetterDate" value="@item.ReceiveLetterDate" />

                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="TalkDate">谈话日期</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="TalkDate" name="TalkDate" value="@item.TalkDate" />

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="TalkArea">谈话地点</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="TalkArea" name="TalkArea" value="@item.TalkArea" />

                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="HandleDate">线索处置日期</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="HandleDate" name="HandleDate" value="@item.HandleDate" />

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="TalkQueryType">处置情况</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="FirstFormType" name="FirstFormType" value="@item.FirstFormType" />
                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="Result">认定事实</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="Result" name="Result" value="@item.Result" />

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="ResultTime">了结反馈时间</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="ResultTime" name="ResultTime" value="@item.ResultTime" />

                            </div>
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="TalkQueryType">反馈方式</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="Reform" name="Reform" value="@item.Reform" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-2 margin-top-10">
                                <label class="margin-5" for="Result">存入个人廉政档案日期</label>
                            </div>
                            <div class="col-xs-4 margin-top-10">
                                <input readonly class="form-control" type="text" id="ArchiveDate" name="ArchiveDate" value="@item.ArchiveDate" />
                            </div>
                        </div>
                    </li>
                    <li class="poster-item  zturn-item box-shadow" id="">
                        <div class="row">
                            <div class="col-xs-12 margin-top-10">
                                <div style="width:100%;">
                                    <table id="TalkQuery_table" class="table table-striped table-bordered table-hover"></table>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </form>
        </div>
    </div>


    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-body">
                    <iframe src="/Person/Pdf" id="pdf" frameborder="0" style="width:100%;height:750px" scrolling="no"></iframe>

                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
    <input type="hidden" id="url" />


</body>
</html>
<script>
    var aa = new zturn({
        id: "zturn",
        opacity: 0.9,
        width: 600,
        Awidth: 324,
        scale: 0.9
    });
    var bili = ($(window).height()) / (870);
    $("body").css("zoom", bili);
    $("li").each(function (index) {
        index = index + 1;
        var yeshu = "<p class='yeshu'>" + index + "</p>"
        $(this).append(yeshu);
    });
  
    $('#TalkQuery_table').bootstrapTable({
        method: 'post',
        url: '/File/GetList?ID=@item.ID&Type=TalkQuery',
        striped: true,
        clickToSelect: true,
        pageSize: 10,
        sidePagination: 'server',
        pageList: [10, 20, 50, 100, 200, 500],
        queryParamsType: 'limit',
        sortName: 'ID',
        sortOrder: 'asc',
        columns: [
            { field: 'FileName', title: '文件名', width: 200, editable: false, },
            { field: 'opt', title: '操作', width: 100, editable: false, formatter: operateFormatterTalkQuery },
        ],
    });
    function operateFormatterTalkQuery(value, row, index) {
        return [
        '<a  href="/File/Download?ID=' + row.ID + '" id="btn_detail" type="button" class="layui-btn layui-btn-sm" style="margin-right:20px;"><span class="glyphicon glyphicon-floppy-save"></span>下载</a>',
        '<a  href="javascript:Affix(\'' + row.ID + '\')"  type="button" class="layui-btn layui-btn-sm layui-btn-normal">预览</a>',
        ].join('');
    }

    function Affix(ID) {
        console.log(ID);
        $("#url").val(ID);
        //$("#pdf").attr('src', $("#pdf").attr('src'));
        LayerModal("附件预览", "/Person/Pdf");

    }
</script>
